<section class="header layout-card">
  <!-- Main Nav – Header -->
  <div class="nav-top layout-row flex-space-between">
    <!-- TODO: Add data-current when on the home page -->
    <a href="{{ '/' | url }}" class="brand-link" {% if page.url == '/' | url %}aria-current="page"{% endif %}>
      <i class="icon icon-20 brand">
        {% include "static/img/icon/icon-brand.svg" %}
      </i>
    </a>
    <a href="#" id="system-theme-toggle">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="10" cy="10" r="3.5" transform="rotate(-90 10 10)" stroke="black"/>
        <line x1="4" y1="10" x2="1" y2="10" stroke="black"/>
        <line x1="10" y1="4" x2="10" y2="1" stroke="black"/>
        <line x1="10" y1="19" x2="10" y2="16" stroke="black"/>
        <line x1="14.6464" y1="5.14645" x2="16.9375" y2="2.85542" stroke="black"/>
        <line x1="3.64645" y1="16.1464" x2="5.93747" y2="13.8554" stroke="black"/>
        <line x1="5.64645" y1="5.85404" x2="3.35542" y2="3.56302" stroke="black"/>
        <line x1="16.6464" y1="16.8536" x2="14.3554" y2="14.5625" stroke="black"/>
        <line x1="19" y1="10" x2="16" y2="10" stroke="black"/>
      </svg>
    </a>
  </div>

  <!-- Main Nav – Search -->
  <div class="nav-search layout-row">
    <form action="http://www.google.com/search">
      <label for=q>Keyword(s):</label>
      <input type="text" name="post-search" id="post-search">
      <input type="hidden" name="ie" value="utf-8">
      <input type="hidden" name="oe" value="utf-8">
      <input type="submit" value="&rarr;">
    </form>
  </div>

  <!-- Main Nav – Nav List -->
  <ul class="nav-list">
    <!-- TODO: Add counts to nav items -->
    {% set navPages = collections.all | eleventyNavigation %}
    {%- for entry in navPages %}
    <a href="{{ entry.url | url }}"{% if entry.url == page.url %} data-current="current item"{% endif %}>
      <li {% if entry.url == page.url %}aria-current="page"{% endif %}>
        <h4>{{ entry.title }}</h4>
      </li>
    </a>
    {%- endfor %}
  </ul>
</section>

<!-- Main Nav – Collapsible Card List -->
<!-- Not every card appears on every page. This is controlled by the template. -->
<section class="collapsible-card-list">
  <!-- Collapsible Card List – Table of Contents -->
  <ul class="layout-card layout-list collapsible-card">
    <li class="card-header">
      <h4>Table of Contents</h4>
      <a href="#" data-control="collapse">
        <i class="icon icon-20 minus"></i>
      </a>
    </li>
    <li class="list-item">List Item</li>
    <li class="list-item">List Item</li>
    <li class="list-item">List Item</li>
  </ul>
  <!-- Collapsible Card List – Category List -->
  <ul class="layout-card layout-list extra-space">
    <li class="list-header">
      <h4>Categories</h4>
    </li>
    {% for tag in collections.tagsList %}
    {%- if tag != "post" -%}
    <li class="list-item">
      <div class="flex-row">
        <div class="primary">
          <a href="/tags/{{tag}}" class="text-capitalize">{{tag}}</a>
        </div>
        <div class="secondary">
          {{ collections[tag].length }} Posts
        </div>
      </div>
      <p>TODO: Add tag descriptions.</p>
    </li>
    {% endif %}
    {% endfor %}
  </ul>

  <!-- Collapsible Card List – Post List -->
  <ul class="layout-card layout-list">
    <li class="card-header">
      <h4>All Posts</h4>
      <a href="#" data-control="collapse">
        <i class="icon icon-20 minus"></i>
      </a>
    </li>
    {% set postslist = collections.post %}
    {% for post in postslist | reverse | limit(10) %}
    <li class="list-item">
      <article{% if post.url == url %} data-current="current item" aria-current="page"{% endif %}>
        <a href="{{ post.url | url }}">
          {% if post.data.title %}
            {{ post.data.title }}
          {% else %}
            Untitled
          {% endif %}
        </a>
        <p>
          <time datetime="{{ post.date | machineDate }}">
            <small>{{ post.date | readableDate }} by <a href="/authors/{{ post.data.author | slug }}/">{{ post.data.author }}</a></small>
          </time>
        </p>
        {% if post.data.tags %}
          <p>
            {% for tag in post.data.tags %}
              {%- if tag != "post" -%}
                {% set tagUrl %}/tags/{{ tag }}/{% endset %}
              <a href="{{ tagUrl | url }}" rel="tag">{{ tag }}</a>
              {%- endif -%}
            {% endfor %}
          </p>
        {% endif %}
      </article>
    </li>
    {% endfor %}
    <li class="list-item read-more">
      <a href="/posts">All posts &rarr;</a>
    </li>
  </ul>
</section>

{% include "components/footer.njk" %}