{
  "lexicon": 1,
  "id": "site.standard.document",
  "defs": {
    "main": {
      "type": "record",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["site", "title", "publishedAt"],
        "properties": {
          "site": {
            "type": "string",
            "format": "uri",
            "description": "Points to a publication record (at://) or a publication url (https://) for loose documents. Avoid trailing slashes."
          },
          "title": {
            "type": "string",
            "maxLength": 5000,
            "maxGraphemes": 500,
            "description": "Title of the document."
          },
          "publishedAt": {
            "type": "string",
            "format": "datetime",
            "description": "Timestamp of the document's publish time."
          },
          "path": {
            "type": "string",
            "description": "Combine with site or publication url to construct a canonical URL to the document. Prepend with a leading slash."
          },
          "description": {
            "type": "string",
            "maxLength": 30000,
            "maxGraphemes": 3000,
            "description": "A brief description or excerpt from the document."
          },
          "coverImage": {
            "type": "blob",
            "accept": ["image/*"],
            "maxSize": 1000000,
            "description": "Image used for thumbnail or cover image. Less than 1MB in size."
          },
          "content": {
            "type": "union",
            "refs": [],
            "closed": false,
            "description": "Open union used to define the record's content. Each entry must specify a $type and may be extended with other lexicons to support additional content formats."
          },
          "textContent": {
            "type": "string",
            "description": "Plaintext representation of the document's contents. Should not contain markdown or other formatting."
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string",
              "maxLength": 1280,
              "maxGraphemes": 128
            },
            "description": "Array of strings used to tag or categorize the document. Avoid prepending tags with hashtags."
          },
          "updatedAt": {
            "type": "string",
            "format": "datetime",
            "description": "Timestamp of the document's last edit."
          },
          "bskyPostRef": {
            "type": "ref",
            "ref": "com.atproto.repo.strongRef",
            "description": "Strong reference to a Bluesky post. Useful to keep track of comments off-platform."
          },

          "fragmentId": {
            "type": "integer",
            "minimum": 1,
            "description": "Extension: nate.rip fragment ID for URL generation."
          },
          "fragmentType": {
            "type": "string",
            "enum": ["post", "shot", "list", "link"],
            "description": "Extension: nate.rip content type."
          },
          "images": {
            "type": "array",
            "maxLength": 20,
            "items": {
              "type": "blob",
              "accept": ["image/png", "image/jpeg", "image/gif", "image/webp", "image/svg+xml", "video/mp4"],
              "maxSize": 50000000
            },
            "description": "Extension: Multiple images for shot galleries."
          },
          "externalUrl": {
            "type": "string",
            "format": "uri",
            "maxLength": 2048,
            "description": "Extension: External URL for link-type fragments."
          }
        }
      }
    }
  }
}
