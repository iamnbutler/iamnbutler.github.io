---
import type { BskyPost } from '../../lib/types';
import { relTime } from '../../lib/variants';

interface Props {
  post: BskyPost;
  cls?: string;
}

const { post: p, cls = '' } = Astro.props;
const bskyUrl = `https://bsky.app/profile/${p.author.handle}/post/${p.rkey}`;
---

<a
  href={bskyUrl}
  class:list={['tile', 'tile-bsky', 'bsky-ping', cls]}
  data-type="bsky"
  target="_blank"
>
  <div class="bsky-telem">
    <div class="bsky-bar" />
    <div class="bsky-bar" />
    <div class="bsky-bar" />
  </div>
  <div class="bsky-ping-body">
    <span class="bsky-rx">RX</span>
    <p class="bsky-text">
      {p.text.length > 140 ? p.text.slice(0, 140) + '...' : p.text}
    </p>
    <span style="font-family: var(--mono); font-size: var(--fs-s); color: var(--fg-2);">
      {relTime(p.createdAt)}
    </span>
  </div>
</a>
