---
import type { Fragment } from '../../lib/types';
import { excerpt } from '../../lib/variants';

interface Props {
  fragment: Fragment;
  cls?: string;
  showExcerpt?: boolean;
}

const { fragment: f, cls = '', showExcerpt = false } = Astro.props;
const dateStr = new Date(f.createdAt).toISOString().slice(0, 10);
---

<a
  href={`/f/${f.id}`}
  class:list={['tile', 'tile-post', 'post-blast', cls]}
  data-type="post"
>
  <div class="post-rail">
    <div class="post-hex" />
    <div class="post-hex" />
    <span class="post-rail-label">Post</span>
    <div class="post-hex" />
  </div>
  <div class="post-body">
    <h3>{f.title}</h3>
    {showExcerpt && f.content && (
      <p class="post-excerpt">{excerpt(f.content, 160)}</p>
    )}
    <time>{dateStr}</time>
  </div>
  <div class="post-stripe" />
</a>
